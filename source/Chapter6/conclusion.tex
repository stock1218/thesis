\chapter{Concluding Remarks}
\label{sec:conclusion}

This thesis was a deep exploration into the world of language design, integer safety, and compiler infrastructure. In this chapter, we will conclude this work with an overview of the final deliverables, future work, the learning outcomes, and a personal reflection on the thesis.

\section{Deliverables}

As covered in the previous chapter, the main deliverable is a clang-tidy plugin that will automatically locate and rewrite statements to use the new C23 checked arithmetic. In addition to this a testing script is provided that was used for the evaluation of the plugin. These deliverables are supplemented by log files generated by the test script containing the generating warnings and final statistics for each plugin, as well as some basic C files that were written as part of initial testing. All of these deliverables have been placed in a Git repository located \href{https://github.com/stock1218/thesis}{here}.

\section{Future Work}

Integer safety is an ongoing problem for software security and there are many aspects of this issue that have yet to be explored. With regard to the approach this thesis took, the following are some topics that would be relevant next steps for exploring this issue.

\subsection{Multithreading}

Concurrency complicates the use of checked arithmetic functions significantly. Race conditions would need to be considered for every expression involved in a rewrite, and even the checked arithmetic functions themselves. Coming up with a solution may involve using mutexes or semaphores in strategically placed locations in the rewrite, but this could introduce overhead and could be dependent on the system itself. Solving this issue would significantly improve the practicality and real-world application of this approach.

\subsection{Updates to C23}

The C23 standard mentions future plans for rewriting the checked arithmetic macros to take just two arguments. If this were the case, the current design of the plugin would need to be updated and questions about the resultant type and how to calculate correctly would be a major question.

\subsection{Maximizing the Utility of Checked Functions}

Since the checked arithmetic macros only take a specific set of types, they are unable to detect overflow for the majority of arithmetic operations. There may be a way to use carefully constructed casts to cast these types to be used in the checked arithmetic functions before being recast to their original values. The main problems to solve with this approach would be selecting the correct types to both preserve original values, detect overflow, and preserve the semantics of the original operation.

\subsection{Working Through Modernizing Larger Codebases}

The current plugin does have issues can does need to have more work done on it to be appropriate for completely automatic rewrites of larger codebases. This would involve going through the cases in which the current rewrite rules do not work, and either fixing the rewrite or coming up with better matchers to avoid rewriting statements that are not supported.

\subsection{Non-Statement Expression Rewrites}

Statement expressions are not currently part of the C standard, and thus aren't supported by a number of compilers. Statement expressions are a keystone for the approach taken by this thesis, however future work could try to use approaches that don't require statement expressions to achieve a more portable solution. This would likely involve more complex rewrites that are less generic.

\section{Learning Outcomes}

A number of interesting and important skills were collected and exercised during this thesis. Working with LLVM and Clang was a major theme of this thesis and is a marketable skill. I learned very specific details about how Clang works, the AST and AST matchers, and how to interact with Clang's C++ APIs. Furthermore, using Visual Studio code and building LLVM was a major learning experience, especially on Windows.

Learning about integer safety was another learning outcome. I learned not only in-depth details on how integers work according to the C standard but many of the cases where issues can arise and how they can be mitigated. Besides integers I learned a lot about the C standard, which I believe has made me a better C programmer.

\section{Reflection}

The student that started this thesis is not the student that is finishing it. This thesis has been one of the most difficult but rewarding experiences I have had at Carnegie Mellon. The initial ideas about what this thesis would cover were very broad and the direction of the project has narrowed significantly since then. I am happy with the result of this thesis, especially considering the struggles went through to complete it. I believe the main hurdles have been related to this narrowing of scope. Initially, my main interest was to work on embedded systems security and what the topic turned out to be felt like a departure from the initial motivations I had. Initially this made the project difficult to complete from both a personal and technical level. I did not have much experience with C++ and the process of even building LLVM, as opposed to my experience with embedded systems, security design, and ARM assembly. Even so, I still managed to make a clang-tidy plugin, learn enough C++ to interact with LLVMs APIs, and I now have a much deeper understanding of C as a language. I see this project as a success and plan to interact with the LLVM community in the future.